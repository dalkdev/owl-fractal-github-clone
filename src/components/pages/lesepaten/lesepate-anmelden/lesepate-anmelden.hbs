<style>
    .nw-max-stepper {
        max-width: 206px;
    }
</style>
<div class="nw-lesepaten-anmelden nw-max-w-sm nw-mx-auto nw-px-4 nw-bg-white">
    <div id="lesepatenSchritte">
    <div class="nw-text-2xl nw-leading-6 nw-font-bold nw-text-center nw-pb-8 nw-pt-4 md:nw-pt-2"> Ich möchte Lesepate
        werden
    </div>
    <ul class="nw-relative nw-flex nw-flex-row nw-mb-8 nw-max-stepper nw-mx-auto">
        <!-- Item -->
        <li class="nw-shrink nw-basis-0 nw-flex-1 nw-group patewerdenTabs">
            <div
                class="nw-min-w-7 nw-min-h-7 nw-w-full nw-inline-flex nw-items-center nw-text-xs nw-align-middle">
                    <span
                        class="nw-w-7 nw-h-7 nw-flex nw-justify-center nw-items-center nw-flex-shrink-0 nw-bg-green-600 bgChange nw-font-medium nw-text-white nw-rounded-full">
                        1
                    </span>
                <div class=" nw-w-full nw-h-px nw-flex-1 nw-bg-gray-200 group-last:nw-hidden"></div>
            </div>
            <div class="nw-mt-3">
                <span class="nw-block nw-text-xs nw-font-bold nw-text-black textChange">Daten</span>
            </div>
        </li>

        <!-- Item -->
        <li class="nw-shrink nw-basis-0 nw-flex-1 nw-group patewerdenTabs">
            <div
                class="nw-min-w-7 nw-min-h-7 nw-w-full nw-inline-flex nw-items-center nw-text-xs nw-align-middle">
                    <span
                        class="nw-w-7 nw-h-7 nw-flex nw-justify-center nw-items-center nw-flex-shrink-0 nw-bg-gray-200 bgChange nw-font-medium nw-text-white nw-rounded-full">
                        2
                    </span>
                <div class=" nw-w-full nw-h-px nw-flex-1 nw-bg-gray-200 group-last:nw-hidden"></div>
            </div>
            <div class="nw-mt-3">
                <span class="nw-block nw-text-xs nw-text-gray-300 nw-font-normal textChange nw--ml-4">Patenschaft</span>
            </div>
        </li>
        <!-- Item -->
        <li class="patewerdenTabs nw-rounded-full">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="5"
                 stroke="currentColor"
                 class="nw-w-7 nw-h-7 nw-text-white nw-bg-gray-200 nw-rounded-full nw-p-2 bgChange">
                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5"/>
            </svg>
            <div class="nw-mt-3">
                <span class="nw-block nw-text-xs nw-text-gray-300 nw-font-normal textChange ">Fertig</span>
            </div>
        </li>
    </ul>
    </div>
    <!-- End Stepper -->

    <!-- Pages Container ( Schritte ) -->

    <div id="formularContainer">
        <form class="patewerdenContainer " id="lesepatenFormular" method="POST">
            <!-- First Container -->
            <div id="page-0" class="page" data-page="0">
                {{>@patewerden-schritte--daten}}
            </div>
            <!-- Second Container -->
            <div id="page-1" class="page nw-hidden" data-page="1">
                {{>@patewerden-schritte--schule}}
            </div>
            <!-- Third Container-->
            <div id="page-3" class="page nw-hidden" data-page="3">
                {{>@patewerden-schritte--fertig}}
            </div>

            <!-- -->
            <div class="nw-flex nw-flex-col md:nw-flex-row nw-gap-x-4 nw-mb-8 ">
                <div class="nw-flex nw-flex-col md:nw-flex-row nw-w-full nw-gap-4 page-buttons nw-mb-4 ">
                    <button type="button" class="zurueckButton nw-w-full md:nw-w-1/2 nw-block
                                                            nw-rounded nw-text-base nw-font-bold nw-bg-white
                                                            nw-cursor-pointer nw-border nw-hidden">
                        Zurück
                    </button>
                    <button type="button"id="weiterButton" class="nw-w-full md:nw-w-1/2 nw-block nw-bg-red-500
                                                            nw-rounded nw-text-base nw-font-bold  nw-text-white
                                                            nw-cursor-pointer nw-border">
                        Weiter
                    </button>
                </div>
                <div class="nw-flex nw-flex-col md:nw-flex-row nw-w-full nw-gap-4 nw-hidden final-page-buttons nw-mb-4">
                    <button type="button" class="zurueckButton nw-w-full md:nw-w-1/2 nw-block
                                                                    nw-rounded nw-text-base nw-font-bold nw-bg-white
                                                                    nw-cursor-pointer nw-border nw-hidden">
                        Zurück
                    </button>
                    <input type="submit" value="Jetzt beantragen" id="beantragenButton" class=" nw-w-full md:nw-w-1/2 nw-mx-auto nw-block nw-px-4
                                                            nw-rounded nw-text-base nw-font-bold nw-text-white nw-bg-red-100
                                                           nw-cursor-pointer nw-border" disabled>
                </div>
            </div>
        </form>
    </div>
    <div id="dankeSeite" class="nw-bg-white nw-pb-20 nw-pt-12 nw-hidden">
         {{>@patewerden-schritte--profile-erfolgreich}}
    </div>
</div>
<script>
    const zurueckButtons = document.querySelectorAll('.zurueckButton');
    const weiterButtons = document.getElementById('weiterButton');
    const pages = document.querySelectorAll('.page');
    const formInputs = document.querySelectorAll('.nw-lesepaten-form');

    let index = 0;

    zurueckButtons.forEach(button => {
        button.addEventListener('click', zurueckButton);
    });
    weiterButtons.addEventListener('click', weiterButton);

    function zurueckButton() {
        index = Math.max(0, index - 1);
        gotoPage(index);
    }


    formInputs.forEach(formInput => {
        formInput.addEventListener('change', (event) => {
            if (formInput.value === '') {
                formInput.setCustomValidity('Bitte füllen Sie die leeren Felder aus!');
            } else {
                formInput.setCustomValidity('');
            }
        });
    });
    function weiterButton() {

      // Formular-Validierung
        let isValid = true;

        for (let i = 0; i < formInputs.length; i++) {
            if (!formInputs[i].checkValidity()) {
                isValid = false;
                formInputs[i].reportValidity();
                break;
            }
        }

        if (isValid) {
            index = Math.min(pages.length - 1, index + 1);
            gotoPage(index);
        }
    }

    function gotoPage(index) {
        pages.forEach(page => {
            page.classList.add('nw-hidden');
        });
        pages[index].classList.remove('nw-hidden');
        lesepatenChangeTabs(index);

           // Die Werten von der Namen nemen und anzeigen
        if (index === pages.length - 1) {
             const inputNames = [
                document.querySelector('input[name="pate_name_zusatz"]'),
                document.querySelector('input[name="pate_email"]'),
                document.querySelector('input[name="pate_phone"]'),
                document.querySelector('input[name="pate_name"]'),
                document.querySelector('input[name="pate_strasse"]'),
                document.querySelector('input[name="pate_plz"]'),
                document.querySelector('input[name="pate_ort"]'),
                document.querySelector('input[name="pate_epaper_amount"]'),
                document.querySelector('input[name="pate_print_amount"]'),
                document.querySelector('input[name="pate_wunschschulen[]"]'),
                document.querySelector('textarea[name="pate_anmerkung"]')
             ];

             const outputValues = [
                document.getElementById('shownName'),
                document.getElementById('shownEmail'),
                document.getElementById('shownTelefon'),
                document.getElementById('shownInstitution'),
                document.getElementById('shownStrasse'),
                document.getElementById('shownPLZ'),
                document.getElementById('shownOrt'),
                document.getElementById('shownEPaperAmount'),
                document.getElementById('shownPrintAmount'),
                document.getElementById('shownWunschschulen'),
                document.getElementById('shownAnmerkung')
             ];

            inputNames.forEach((input, ind) => {
                if (input.name === "pate_epaper_amount" || input.name === "pate_print_amount") {
                    outputValues[ind].textContent = input.value === '' || input.value === "0" ? "0" : input.value;
                } else if (input.name === "pate_wunschschulen[]" || input.name === "pate_anmerkung") {
                    outputValues[ind].textContent = input.value === '' ? '---' : input.value;
                } else {
                    outputValues[ind].textContent = input.value;
                }
            });
        }
    }

    function lesepatenChangeTabs(index) {
        const tabs = document.querySelectorAll('.patewerdenTabs');
        tabs.forEach(tab => {
            tab.querySelector('.bgChange').classList.replace('nw-bg-green-600', 'nw-bg-gray-200');
            tab.querySelector('.textChange').classList.replace('nw-text-black', 'nw-text-gray-300');
            tab.querySelector('.textChange').classList.replace('nw-font-bold', 'nw-font-normal');
        });
        tabs[index].querySelector('.bgChange').classList.replace('nw-bg-gray-200', 'nw-bg-green-600');
        tabs[index].querySelector('.textChange').classList.replace('nw-text-gray-300', 'nw-text-black');
        tabs[index].querySelector('.textChange').classList.replace('nw-font-normal', 'nw-font-bold');

        // Zurück button in erster Seite hidden
        const zurueckButtons = document.querySelectorAll('.zurueckButton');
        zurueckButtons.forEach(button => {
            if (index === 0) {
                button.classList.add('nw-hidden');
            } else {
                button.classList.remove('nw-hidden');
            }
        });
      // Buttons in pages hidden
        const pageButtons = document.querySelector('.page-buttons');
        const finalPagesButton = document.querySelector('.final-page-buttons');
        if (index === pages.length - 1) {
            pageButtons.classList.add('nw-hidden');
            finalPagesButton.classList.replace('nw-hidden', 'nw-block');
        } else {
            pageButtons.classList.remove('nw-hidden');
            finalPagesButton.classList.replace('nw-block', 'nw-hidden');
        }
    }

    // Wenn ich submit mache, wird Danke-Seite angezeigt
    document.getElementById("lesepatenFormular").addEventListener("submit", function(e) {
        e.preventDefault();
        document.getElementById("lesepatenSchritte").style.display = "none";
        document.getElementById("formularContainer").style.display = "none";
        document.getElementById("dankeSeite").classList.replace('nw-hidden', 'nw-block');
        document.getElementById("deleteAtTheEnd").classList.replace('nw-block', 'nw-hidden');
        document.getElementById("showAtTheEnd").classList.replace('nw-hidden', 'nw-block');
    });

    //zur Seiten springen
        document.getElementById('datenPage').addEventListener('click', function() {
            // Springe zur Seite 0 (Daten)
            gotoPage(0);
            index = 0;

        });

        document.getElementById('patenschaftPage').addEventListener('click', function() {
            // Springe zur Seite 1 (Patenschaft)
            gotoPage(1);
            index = 1;
        });
        // FORM LESEPATEN WERDEN ( Checkbox)
            var lesepatenCheckBox1 = document.getElementById('lesepatenCheckCondition1');
            var lesepatenCheckBox2 = document.getElementById('lesepatenCheckCondition2');
            var bBeantragen = document.getElementById('beantragenButton');

            lesepatenCheckBox1.addEventListener('change', checkFunction);
            lesepatenCheckBox2.addEventListener('change', checkFunction);

            function checkFunction() {
                if (
                  lesepatenCheckBox1.checked === true &&
                  (lesepatenCheckBox2.checked === true || lesepatenCheckBox2.checked === false)
                ) {
                    bBeantragen.disabled = false;
                    bBeantragen.style.backgroundColor = '#D20A11';
                } else {
                    bBeantragen.disabled = true;
                    bBeantragen.style.backgroundColor = '#E1B9BA';
                }
            }
</script>



